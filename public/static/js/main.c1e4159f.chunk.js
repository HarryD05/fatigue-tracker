(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(e,n){var t=function(e){return 2===e.toString().length?e:"0"+e};n.formatDate=function(e){return"".concat(e.getDate()," ").concat((n=e.getMonth(),{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}[n])," ").concat(e.getFullYear());var n},n.formatTime=function(e){return"".concat(t(e.getHours()),":").concat(t(e.getMinutes()))}},28:function(e,n,t){},48:function(e,n,t){e.exports=t(67)},53:function(e,n,t){},61:function(e,n,t){},63:function(e,n,t){},64:function(e,n,t){},65:function(e,n,t){},66:function(e,n,t){},67:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),r=t(41),l=t.n(r),s=t(20),c=t(8),m=t(5),d=t(7),u=(t(53),function(e){return i.a.createElement("nav",{className:"navbar"},i.a.createElement("div",{className:"title"},i.a.createElement(s.b,{to:"/"},i.a.createElement("h1",null,"Fatigue Tracker"))),i.a.createElement("div",{className:"links"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(s.b,{to:"/logs"},"Logs")),i.a.createElement("li",null,i.a.createElement(s.b,{to:"/today"},"Today")))))}),o=(t(28),function(e){return i.a.createElement("main",{className:"home"},i.a.createElement("h1",null,"Home"),i.a.createElement("div",{className:"aim"},i.a.createElement("h2",null,"Aim"),i.a.createElement("p",null,"Track activity & tiredness througout the day - to see what activities have the greatest toll on fatigue.")),i.a.createElement("h2",null,"Types of activity: "),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("b",null,"Required")," e.g. eating, showering & time with helpers"),i.a.createElement("li",null,i.a.createElement("b",null,"Resting")," e.g. napping in bed or sitting with no stimulation"),i.a.createElement("li",null,i.a.createElement("b",null,"Rehabilitation")," e.g. physio & exercise"),i.a.createElement("li",null,i.a.createElement("b",null,"Socialising")," e.g. phone call, facebook portal, facetime & posting on facebook"),i.a.createElement("li",null,i.a.createElement("b",null,"Non-productive")," e.g. reading, watching TV, listening to radio & browsing facebook")),i.a.createElement("h2",null,"Logs"),i.a.createElement("p",null,"Each time you start an activity a new activity, you add a new log - you will need to ..."),i.a.createElement("ul",null,i.a.createElement("li",null,"Select what type of activity it is"),i.a.createElement("li",null,"Log your current tiredness (physical & mental)")))}),T=t(69),g=t(11);function h(){var e=Object(g.a)(["\n  query {\n    today {\n      _id\n      date\n      startTime\n      endTime\n      initMentTiredness\n      initPhysTiredness\n      endMentTiredness\n      endPhysTiredness\n      avgMentTiredness\n      avgPhysTiredness\n      logs {\n        _id \n        startTime\n        endTime\n        category\n        initPhysTiredness\n        initMentTiredness\n        endPhysTiredness\n        endMentTiredness\n      }\n    }\n  }\n"]);return h=function(){return e},e}var E=Object(c.b)(h()),y=t(18),p=t(36),b=t.n(p),f=t(46),v=t(22),O=t(21),j=t(23);function M(){var e=Object(g.a)(["\n  mutation initDay($initDayInput: InitDayInput!){\n    initDay(initDayInput: $initDayInput) {\n      _id\n      date\n      startTime\n      endTime\n      initMentTiredness\n      initPhysTiredness\n      endMentTiredness\n      endPhysTiredness\n      avgMentTiredness\n      avgPhysTiredness\n      logs {\n        _id \n        startTime\n        endTime\n        category\n        initPhysTiredness\n        initMentTiredness\n        endPhysTiredness\n       endMentTiredness\n      }\n    }\n  }\n"]);return M=function(){return e},e}var N=Object(c.b)(M()),P=(t(61),Object(T.a)(N)((function(e){var n=Object(a.useState)({startTime:null,initPhysTiredness:9,initMentTiredness:9}),t=Object(j.a)(n,2),r=t[0],l=t[1],s=function(e){l(Object(O.a)(Object(O.a)({},r),{},Object(v.a)({},e.target.name,e.target.value)))},c=function(){var n=Object(f.a)(b.a.mark((function n(t){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.preventDefault(),e.mutate({variables:{initDayInput:{startTime:new Date((new Date).toDateString()+" "+r.startTime),initPhysTiredness:Number(r.initPhysTiredness),initMentTiredness:Number(r.initMentTiredness)}}}).then((function(){e.onComplete()}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return i.a.createElement("form",{id:"init-day",onSubmit:c},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"startTime"},"Woke up: "),i.a.createElement("input",{type:"time",name:"startTime",onChange:s})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"initPhysTiredness"},"Initial physical tiredness: "),i.a.createElement("input",{type:"range",min:"0",max:"9",step:"1",name:"initPhysTiredness",onChange:s})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"initMentTiredness"},"Initial mental tiredness: "),i.a.createElement("input",{type:"range",min:"0",max:"9",step:"1",name:"initMentTiredness",onChange:s})),i.a.createElement("div",{className:"init-container"},i.a.createElement("button",{type:"submit"},"Initialise new day")))}))),D=t(47);function w(){var e=Object(g.a)(["\n  mutation initLog($initInput: InitInput!){\n    initLog(initInput: $initInput) {\n      _id \n      startTime\n      endTime\n      category\n      initPhysTiredness\n      initMentTiredness\n      endPhysTiredness\n      endMentTiredness\n    }\n  }\n"]);return w=function(){return e},e}var I=Object(c.b)(w());function S(){var e=Object(g.a)(["\n  mutation updateLog($updateInput: UpdateInput!){\n    updateLog(updateInput: $updateInput) {\n      _id \n      startTime\n      endTime\n      category\n      initPhysTiredness\n      initMentTiredness\n      endPhysTiredness\n      endMentTiredness\n    }\n  }\n"]);return S=function(){return e},e}var L=Object(c.b)(S());function C(){var e=Object(g.a)(["\n  mutation completeLogs($updateInput: UpdateInput!){\n    completeLogs(updateInput: $updateInput) {\n      _id \n      startTime\n      endTime\n      category\n      initPhysTiredness\n      initMentTiredness\n      endPhysTiredness\n      endMentTiredness\n    }\n  }\n"]);return C=function(){return e},e}var F=Object(c.b)(C());function _(){var e=Object(g.a)(["\n  mutation setBedTime($time: String!){\n    setBedTime(time: $time) {\n      _id\n      date\n      startTime\n      endTime\n      initMentTiredness\n      initPhysTiredness\n      endMentTiredness\n      endPhysTiredness\n      avgMentTiredness\n      avgPhysTiredness\n      logs {\n        _id \n        startTime\n        endTime\n        category\n        initPhysTiredness\n        initMentTiredness\n        endPhysTiredness\n        endMentTiredness\n      }\n    }\n  }\n"]);return _=function(){return e},e}var R=Object(c.b)(_());function x(){var e=Object(g.a)(["\n  mutation calculateAverages($date: String!){\n    calculateAverages(date: $date) {\n      _id\n      date\n      startTime\n      endTime\n      initPhysTiredness\n      initMentTiredness\n      endMentTiredness\n      endPhysTiredness\n      avgPhysTiredness\n      avgMentTiredness\n      logs {\n        _id\n      }\n    }\n  }\n"]);return x=function(){return e},e}var k=Object(c.b)(x()),$=(t(63),Object(D.flowRight)(Object(T.a)(I,{name:"initLog"}),Object(T.a)(L,{name:"updateLog"}),Object(T.a)(F,{name:"completeLogs"}),Object(T.a)(R,{name:"setBedTime"}),Object(T.a)(k,{name:"calculateAverages"}))((function(e){var n=Object(a.useState)({category:null,physTiredness:9,mentTiredness:9}),t=Object(j.a)(n,2),r=t[0],l=t[1],s=Object(a.useState)({endTime:null,physTiredness:9,mentTiredness:9}),c=Object(j.a)(s,2),m=c[0],d=c[1],u=function(e,n){n?d(Object(O.a)(Object(O.a)({},m),{},Object(v.a)({},e.target.name,e.target.value))):l(Object(O.a)(Object(O.a)({},r),{},Object(v.a)({},e.target.name,e.target.value)))},o=function(n){n?e.completeLogs({variables:{updateInput:{physTiredness:Number(m.physTiredness),mentTiredness:Number(m.mentTiredness),endTime:new Date(m.endTime)}}}).then((function(){e.calculateAverages({variables:{date:new Date}}).then((function(){e.onComplete("Final log set, you're done for the day!")}))})):(document.getElementById("init-log").reset(),e.updateLog({variables:{updateInput:{physTiredness:Number(r.physTiredness),mentTiredness:Number(r.mentTiredness),endTime:new Date}}}).then((function(){e.onComplete("Log submitted!")})))},T=function(n,t){n.preventDefault(),t?e.setBedTime({variables:{time:new Date((new Date).toDateString()+" "+m.endTime)}}).then((function(){o(!0)})):(e.isFirstLog&&e.initLog({variables:{initInput:{category:0,startTime:new Date(e.startTime)}}}),e.initLog({variables:{initInput:{category:Number(r.category),startTime:new Date}}}).then((function(){o(!1)})))};return i.a.createElement("div",{className:"log-forms"},i.a.createElement("form",{id:"init-log",onSubmit:function(e){return T(e,!1)}},i.a.createElement("h1",null,"New Log"),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"category"},"Category"),i.a.createElement("select",{name:"category",onChange:function(e){return u(e,!1)}},i.a.createElement("option",{value:0},"Required"),i.a.createElement("option",{value:1},"Rest"),i.a.createElement("option",{value:2},"Rehabilitation"),i.a.createElement("option",{value:3},"Socialising"),i.a.createElement("option",{value:4},"Non-productive"))),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"physTiredness"},"physical tiredness: "),i.a.createElement("input",{type:"range",min:"0",max:"9",step:"1",defaultValue:"9",name:"physTiredness",onChange:function(e){return u(e,!1)}})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"mentTiredness"},"mental tiredness: "),i.a.createElement("input",{type:"range",min:"0",max:"9",step:"1",defaultValue:"9",name:"mentTiredness",onChange:function(e){return u(e,!1)}})),i.a.createElement("div",{className:"init-container"},i.a.createElement("button",{type:"submit"},"Submit log"))),i.a.createElement("form",{id:"bedtime-form",onSubmit:function(e){return T(e,!0)}},i.a.createElement("h1",null,"Final log"),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"endTime"},"Bed time: "),i.a.createElement("input",{type:"time",name:"endTime",onChange:function(e){return u(e,!0)}})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"physTiredness"},"physical tiredness: "),i.a.createElement("input",{type:"range",min:"0",max:"9",step:"1",defaultValue:"9",name:"physTiredness",onChange:function(e){return u(e,!0)}})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"mentTiredness"},"mental tiredness: "),i.a.createElement("input",{type:"range",min:"0",max:"9",step:"1",defaultValue:"9",name:"mentTiredness",onChange:function(e){return u(e,!0)}})),i.a.createElement("div",{className:"init-container"},i.a.createElement("button",{type:"submit"},"Submit log"))))}))),q=Object(T.a)(E)((function(e){var n=e.data,t=n.today,a=n.loading,r=!0,l=!1,s=!1;t&&(r=new Date(t.date).getDate()!==(new Date).getDate(),l=0===t.logs.length,s=!!t.endTime);var c=function(n){e.data.refetch(),alert(n||"Successful")};return i.a.createElement("main",{className:"today"},i.a.createElement("h1",null,"Today"),i.a.createElement("h2",null,Object(y.formatDate)(new Date)),i.a.createElement("br",null),a?i.a.createElement("h2",{className:"loading"},"Loading..."):null,!a&&r?i.a.createElement(P,Object.assign({onComplete:c},e)):null,a||r||!t||s?null:i.a.createElement($,Object.assign({onComplete:c,isFirstLog:l,startTime:t.startTime},e)),a||r||!s?null:i.a.createElement("h2",null,"Completed"))}));function A(){var e=Object(g.a)(["\n  query {\n    days {\n      _id\n      date\n      startTime\n      endTime\n      initMentTiredness\n      initPhysTiredness\n      endMentTiredness\n      endPhysTiredness\n      avgMentTiredness\n      avgPhysTiredness\n      logs {\n        _id \n        startTime\n        endTime\n        category\n        initPhysTiredness\n        initMentTiredness\n        endPhysTiredness\n        endMentTiredness\n      }\n    }\n  }\n"]);return A=function(){return e},e}var B=Object(c.b)(A()),J=(t(64),{0:"Required",1:"Rest",2:"Rehabilitation",3:"Socialising",4:"Non-productive"}),V=function(e){var n="",t=-1;return e.timeSpent.forEach((function(e){t++,n+='\n      <div className="category">\n        <b>'.concat(J[t],"</b>: <p>").concat(e.toFixed(2)," mins</p>\n      </div>\n    ")})),i.a.createElement("div",{className:"categories",dangerouslySetInnerHTML:{__html:n}})},H=function(e){var n=e.day,t=Object(a.useState)(!1),r=Object(j.a)(t,2),l=r[0],s=r[1],c=Object(y.formatDate)(new Date(n.startTime)),m=Object(y.formatTime)(new Date(n.startTime)),d=n.endTime?Object(y.formatTime)(new Date(n.endTime)):"Not yet submitted",u=n.avgMentTiredness?n.avgMentTiredness:"Not yet calculated - day not complete",o=n.avgPhysTiredness?n.avgPhysTiredness:"Not yet calculated - day not complete",T=[0,0,0,0,0];n.logs.forEach((function(e){if(e.endTime){var n=Math.abs(new Date(e.endTime)-new Date(e.startTime))/1e3,t=Number((n/60).toFixed(1));T[e.category]+=t}}));return i.a.createElement("div",{className:"day-tile"},i.a.createElement("h2",null,c),i.a.createElement("button",{onClick:function(){return s(!l)}},"Summary"),i.a.createElement("button",{onClick:function(){e.history.push("/logs/".concat(n._id))}},"See all logs..."),l?i.a.createElement("div",{className:"details"},i.a.createElement("div",{className:"times"},i.a.createElement("h3",null,"Woke up: "),i.a.createElement("p",null,m),i.a.createElement("br",null),i.a.createElement("h3",null,"Bed time: "),i.a.createElement("p",null,d)),i.a.createElement("div",{className:"averages"},i.a.createElement("h3",null,"Averages"),i.a.createElement("br",null),i.a.createElement("h4",null,"Physical tiredness: "),i.a.createElement("p",null,o),i.a.createElement("br",null),i.a.createElement("h4",null,"Mental tiredness: "),i.a.createElement("p",null,u)),i.a.createElement("div",{className:"categories-container"},i.a.createElement("h3",null,"Time spent on each category"),i.a.createElement("br",null),i.a.createElement(V,Object.assign({timeSpent:T},e)))):null)},U=Object(T.a)(B)((function(e){var n=e.data,t=n.loading,a=n.days;return i.a.createElement("main",{className:"logs"},i.a.createElement("h1",null,"Logs"),t&&i.a.createElement("h2",{className:"loading"},"Loading..."),a&&a.map((function(n){return i.a.createElement(H,Object.assign({key:n._id,day:n},e))})))})),W=t(31);function Y(){var e=Object(g.a)(["\n  query getDay($dayId: ID!){\n    day (dayId: $dayId) {\n      _id\n      date\n      startTime\n      endTime\n      initMentTiredness\n      initPhysTiredness\n      endMentTiredness\n      endPhysTiredness\n      avgMentTiredness\n      avgPhysTiredness\n      logs {\n        _id \n        startTime\n        endTime\n        category\n        initPhysTiredness\n        initMentTiredness\n        endPhysTiredness\n        endMentTiredness\n      }\n    }\n  }\n"]);return Y=function(){return e},e}var z=Object(c.b)(Y()),G=(t(65),{0:"Required",1:"Rest",2:"Rehab",3:"Social",4:"Non-prod."}),K=function(e){var n=e.log,t=function(e,n){var t=Math.abs(new Date(e)-new Date(n))/1e3;return Number((t/60).toFixed(1))}(n.endTime,n.startTime),a=n.endMentTiredness-n.initMentTiredness,r=n.endPhysTiredness-n.initPhysTiredness;return i.a.createElement("tr",null,i.a.createElement("td",null,Object(y.formatTime)(new Date(n.startTime))),i.a.createElement("td",null,Object(y.formatTime)(new Date(n.endTime))),i.a.createElement("td",null,t),i.a.createElement("td",null,G[n.category]),i.a.createElement("td",null,n.initMentTiredness),i.a.createElement("td",null,n.endMentTiredness),i.a.createElement("td",null,a),i.a.createElement("td",null,(a/t).toFixed(2)),i.a.createElement("td",null,n.initPhysTiredness),i.a.createElement("td",null,n.endPhysTiredness),i.a.createElement("td",null,r),i.a.createElement("td",null,(r/t).toFixed(2)))},Q=function(e){var n,t=Object(d.f)().id,a=Object(W.b)(z,{variables:{dayId:t}}),r=a.loading,l=a.error,s=a.data;return i.a.createElement("div",{className:"day-details"},r&&i.a.createElement("h2",{className:"loading"},"Loading..."),l&&i.a.createElement("h2",{className:"error"},"ERROR"),!r&&!l&&s.day&&(n=s.day,i.a.createElement("div",{className:"day"},i.a.createElement("h1",null,Object(y.formatDate)(new Date(n.date))),i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Start time"),i.a.createElement("th",null,"End time"),i.a.createElement("th",null,"Length (minutes)"),i.a.createElement("th",null,"Category"),i.a.createElement("th",null,"Start mental tiredness"),i.a.createElement("th",null,"End mental tiredness"),i.a.createElement("th",null,"Change in mental tiredness"),i.a.createElement("th",null,"Rate of change in mental tiredness (units per min)"),i.a.createElement("th",null,"Start physical tiredness"),i.a.createElement("th",null,"End physical tiredness"),i.a.createElement("th",null,"Change in physical tiredness"),i.a.createElement("th",null,"Rate of change in physical tiredness (units per min)"))),i.a.createElement("tbody",null,n.logs.map((function(e){return i.a.createElement(K,{key:e._id,log:e})})))))))};var X=function(){return i.a.createElement("div",null,i.a.createElement(u,null),i.a.createElement(d.c,null,i.a.createElement(d.a,{exact:!0,path:"/",component:o}),i.a.createElement(d.a,{path:"/today",component:q}),i.a.createElement(d.a,{exact:!0,path:"/logs",component:U}),i.a.createElement(d.a,{path:"/logs/:id",component:Q})))},Z=(t(66),new c.a({uri:"/graphql"}));l.a.render(i.a.createElement(m.b,{client:Z},i.a.createElement(s.a,null,i.a.createElement(X,null))),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.c1e4159f.chunk.js.map